{% extends "layout.html" %}
{% block head %}
{{ super ()}}
<link rel="stylesheet" href="{{ url_for('static', filename='pokesprite.css') }}">
<script src="{{ url_for('static', filename='pokesprite.js') }}"></script>
<script src="{{ url_for('static', filename='progressbar.js') }}"></script>
{% endblock %}

{% block title %}{{ username }}'s Living Dex{% endblock %}
{% block content %}

<h2>
<span class='usernameHeading'>
{{ username }}
</span>
<span>:</span>
<span class='friendCode'>
{{ friendCode }}
</span>
</h2>

<div class='progressBar'>
    <div class='filledBar'></div>
    <div class='progressBarText'></div>
</div>

{% if session.username == username%}
<p>
This is your LivingDex! It keeps track of how many Pokémon you currently have in your PC Box in game. It helps you name and lay out your boxes - each section is the same size as a PC Box.
</p>
<p>
To mark a Pokémon as caught, click it so that it turns green. Catch ´Em All!
</p>
{% endif %}

<ul>
{% for pokemon in dex %}

{% if loop.index0 % 30 == 0 %}
<div class='boxTitle'>
{% set boxStartIndex = loop.index %}
{% set boxEndIndex = loop.index0 + 30 %}
{{("%03d")|format(boxStartIndex)}} - {{("%03d")|format(boxEndIndex)}}
</div>
{% endif %}
<li
id={{ loop.index }}
{% if pokemon == "0" %}
class='pokemonCell uncaught'
{% else %}
class='pokemonCell caught'
{% endif %}
>
<div class='pokemonCellNumber'>{{ ("%03d")|format(loop.index) }}</div>
<span class='pkspr pkmn-{{ pokemonSlugs[loop.index - 1] }}'></span>
<div class='pokemonCellName'>{{ pokemonNames[loop.index - 1] }}</div>
</li>

{% endfor %}
</ul>

<script type="text/javascript">var user = "{{ username }}";</script>
{% if session.username == username%}
<script src="{{ url_for('static', filename='editdex.js' ) }}"></script>
{% endif %}
<script>
    PkSpr.process_dom();
    updateProgressBar();
</script>
{% endblock %}
